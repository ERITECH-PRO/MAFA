---
// Import the Image component from astro:assets
import { Image } from "astro:assets";

// Destructure the component properties from Astro.props
const { id, aria, src, alt, first, second, video, width, height } = Astro.props;

// Define TypeScript interface for the properties
interface Props {
  id: string;
  aria: string;
  src?: any;
  alt: string;
  first?: boolean;
  second?: boolean;
  video?: boolean;
  width?: number;
  height?: number;
}
// Set class based on 'first' property
// If 'first' is present, show the tab content immediately
const firstClass = first ? "" : "hidden";
// Set class based on 'second' property
// If 'second' is present, use an alternate style for the image
const secondClass = second
  ? "shadow-xl aspect-5/4 bg-neutral-300 dark:bg-neutral-600 object-cover p-3 lg:aspect-auto shadow-neutral-200 rounded-xl dark:shadow-neutral-900/[.2]"
  : "shadow-xl aspect-3/2 object-cover lg:aspect-auto shadow-neutral-200 rounded-xl dark:shadow-neutral-900/[.2]";

// Video-specific class that removes padding and makes it fit closer to container
const videoClass = second
  ? "w-full h-full max-h-[500px] object-cover rounded-xl"
  : "w-full h-full max-h-[500px] object-cover rounded-xl";

/*
first: This property should be set to true for the initial TabContent component
in your list to ensure that it's visible when the page first loads.
All subsequent TabContent components should omit this property or set it to false.

second: This property allows to control changes in the look of the Image.
If it is set to true, the Image will have different aspect ratio and background color.
If this property is not provided or is set to false, the Image will use default styling.
You can enable this for any TabContent component you want to apply these changes to.

This is the full example:
<TabContent id="" aria="" src="" alt="" first={true}/>
<TabContent id="" aria="" src="" alt="" second={true}/>
<TabContent id="" aria="" src="" alt="" />
*/
---

<!-- Container for tab content that controls visibility and accessibility -->
<div id={id} role="tabpanel" class={`tab-content ${firstClass}`} aria-labelledby={aria}>
  {video ? (
    <!-- Video element -->
    <video
      src={typeof src === 'string' ? src : src?.src || src}
      class={videoClass}
      controls
      autoplay
      loop
      muted
      playsinline
    >
      Your browser does not support the video tag.
    </video>
  ) : (
  <!-- Astro Image component to display the image with dynamic classes based on the 'second' property -->
  <Image
    src={src}
    alt={alt}
      width={width || 1200}
    height={height || 800}
    class={`${secondClass} max-h-[500px] object-contain`}
    draggable={"false"}
    format={"avif"}
    loading={"eager"}
  />
  )}
</div>

<style>
  .tab-content {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    max-height: 500px;
    opacity: 1;
    transition: opacity 0.3s ease-in-out;
    will-change: opacity;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    overflow: hidden;
  }
  
  @media (min-width: 1024px) {
    .tab-content {
      left: 2rem;
      width: calc(100% - 2rem);
    }
  }
  
  .tab-content.hidden {
    display: none;
    opacity: 0;
  }
  
  .tab-content:not(.hidden) {
    display: flex;
    opacity: 1;
  }
  
  .tab-content video,
  .tab-content img {
    max-height: 500px;
    max-width: 100%;
    width: auto;
    height: auto;
    margin-left: 0;
  }
</style>
